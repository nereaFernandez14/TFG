<form [formGroup]="passwordForm" (ngSubmit)="cambiarPassword()" class="password-form">
  <!-- Contraseña actual -->
  <div class="form-group">
    <label for="currentPassword">
      <i class="fas fa-lock"></i> Contraseña actual
    </label>
    <input
      type="password"
      id="currentPassword"
      formControlName="currentPassword"
      autocomplete="current-password"
    />
    <p *ngIf="currentPasswordError" class="error-msg">
      {{ currentPasswordError }}
    </p>
  </div>

  <!-- Nueva contraseña -->
  <div class="form-group">
    <label for="newPassword">
      <i class="fas fa-key"></i> Nueva contraseña
    </label>
    <input
      type="password"
      id="newPassword"
      formControlName="newPassword"
      autocomplete="new-password"
    />
    <p *ngIf="passwordForm.get('newPassword')?.touched && passwordForm.get('newPassword')?.hasError('minlength')" class="error-msg">
      <i class="fas fa-exclamation-triangle"></i> La nueva contraseña debe tener al menos 6 caracteres
    </p>
  </div>

  <!-- Confirmar nueva contraseña -->
  <div class="form-group">
    <label for="confirmNewPassword">
      <i class="fas fa-check-double"></i> Confirmar nueva contraseña
    </label>
    <input
      type="password"
      id="confirmNewPassword"
      formControlName="confirmNewPassword"
      autocomplete="new-password"
    />
    <p *ngIf="passwordForm.get('confirmNewPassword')?.dirty && passwordsNoMatch" class="error-msg">
      <i class="fas fa-times-circle"></i> Las contraseñas no coinciden
    </p>
  </div>

  <button type="submit" [disabled]="passwordForm.invalid || passwordsNoMatch">
    <i class="fas fa-sync-alt"></i> Actualizar contraseña
  </button>

  <p *ngIf="errorMessage" class="error-msg">
    <i class="fas fa-times-circle"></i> {{ errorMessage }}
  </p>

  <p *ngIf="successMessage" class="success-msg">
    <i class="fas fa-check-circle"></i> {{ successMessage }}
  </p>
</form>
