<form [formGroup]="resenyaForm" (ngSubmit)="enviarResena()">
  <div class="estrella-container">
    <span *ngFor="let estrella of estrellas"
          class="estrella"
          [class.activa]="estrella <= (puntuacionHover || puntuacionSeleccionada)"
          (click)="seleccionarPuntuacion(estrella)"
          (mouseover)="destacarPuntuacion(estrella)"
          (mouseleave)="resetearHover()">
      ★
    </span>
  </div>

  <textarea formControlName="comentario"
            placeholder="Escriba aquí su opinión..."
            rows="4"
            (input)="validarComentario()"></textarea>

  <div *ngIf="!comentarioValido" class="error">
    ❌ El comentario contiene palabras inapropiadas
  </div>

  <input type="file" accept="image/*" multiple (change)="handleFileInput($event)" />

  <div class="vista-previa">
    <img *ngFor="let img of vistaPrevia" [src]="img" class="preview-img"/>
  </div>

  <div class="botones">
    <button type="submit" [disabled]="resenyaForm.invalid || puntuacionSeleccionada === 0 || !comentarioValido">
      Enviar Reseña
    </button>
  </div>

  <p *ngIf="mostrarExito" class="exito">✅ Reseña registrada correctamente</p>
</form>
