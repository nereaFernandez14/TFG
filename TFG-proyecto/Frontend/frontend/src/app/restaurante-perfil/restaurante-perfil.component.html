<div *ngIf="restaurante" class="perfil-restaurante">
  <h2>{{ restaurante.nombre }}</h2>
  <p>{{ restaurante.descripcion || 'Sin descripciÃ³n disponible' }}</p>

  <div class="info-contacto">
    <p><strong>DirecciÃ³n:</strong> {{ restaurante.direccion }}</p>
    <p><strong>TelÃ©fono:</strong> {{ restaurante.telefono }}</p>
  </div>

  <div class="etiquetas">
    <span class="etiqueta">{{ restaurante.tipoCocina }}</span>
    <span class="etiqueta">{{ restaurante.barrio }}</span>
    <span class="etiqueta">{{ restaurante.rangoPrecio }}</span>
    <span
      *ngFor="let restriccion of restaurante.restriccionesDieteticas"
      class="etiqueta"
    >
      {{ restriccion }}
    </span>
  </div>

  <!-- âœ… BotÃ³n para abrir el modal -->
  <button class="btn-resena" *ngIf="mostrarFormularioResena" (click)="abrirModalResena()">
    AÃ±adir reseÃ±a
  </button>

  <!-- âŒ Mostrar mensaje si no estÃ¡ logueado -->
  <p *ngIf="!mostrarFormularioResena" class="aviso-login">
    ğŸ”’ Debes iniciar sesiÃ³n para dejar una reseÃ±a.
  </p>

  <!-- âœ… Modal con reseÃ±a -->
  <div class="modal-backdrop" *ngIf="modalAbierto" (click)="cerrarModal()">
    <div class="modal" (click)="$event.stopPropagation()">
      <app-resenya
        [restauranteNombre]="restaurante.nombre"
        [restauranteId]="restaurante.id"
        (resenaEnviada)="recargarResenas(); cerrarModal()"
      ></app-resenya>
      <button class="cerrar-modal" (click)="cerrarModal()">âœ–</button>
    </div>
  </div>

  <!-- ğŸ”½ ReseÃ±as -->
  <div class="resenas">
    <h3>ReseÃ±as</h3>
    <div *ngIf="resenas.length === 0">No hay reseÃ±as aÃºn.</div>
    <div *ngFor="let resena of resenas" class="resena-card">
      <div class="estrellas">
        <span *ngFor="let star of [].constructor(5); let i = index">
          <span [class.activa]="i < resena.valoracion">â˜…</span>
        </span>
      </div>
      <p *ngIf="resena.contenido"><em>{{ resena.contenido }}</em></p>

      <!-- ğŸ–¼ï¸ ImÃ¡genes -->
      <div *ngIf="resena.imagenes && resena.imagenes.length > 0" class="imagenes-resena">
        <img
          *ngFor="let img of resena.imagenes"
          [src]="'/uploads/' + img.nombreArchivo"
          alt="Imagen de reseÃ±a"
          class="img-resena"
        />
      </div>
    </div>
  </div>
</div>
