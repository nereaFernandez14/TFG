<div class="formulario-container">
  <h2>Registrar Restaurante</h2>

  <form *ngIf="restauranteForm" [formGroup]="restauranteForm" (ngSubmit)="onSubmit()">
    <!-- Nombre -->
    <div class="form-group">
      <label>Nombre*</label>
      <input type="text" formControlName="nombre" placeholder="Ej: Juan Carlos" />
      <div *ngIf="restauranteForm.get('nombre')?.touched && restauranteForm.get('nombre')?.invalid" class="error">
        El nombre es obligatorio.
      </div>
    </div>

    <!-- Dirección -->
    <div class="form-group">
      <label>Dirección*</label>
      <input type="text" formControlName="direccion" placeholder="Ej: Calle mayor 12, piso 3, madrid centro, madrid, 28013" />
      <div *ngIf="restauranteForm.get('direccion')?.touched && restauranteForm.get('direccion')?.invalid" class="error">
        La dirección es obligatoria o inválida.
      </div>
      <div *ngIf="restauranteForm.get('direccion')?.errors?.['malsonante']" class="error">
        La dirección contiene palabras no permitidas.
      </div>
    </div>

    <!-- Teléfono -->
    <div class="form-group">
      <label>Teléfono*</label>
      <input type="text" formControlName="telefono" placeholder="Ej: 612345678 o 912345678" />
      <div *ngIf="restauranteForm.get('telefono')?.touched && restauranteForm.get('telefono')?.invalid" class="error">
        El teléfono es obligatorio o inválido.
      </div>
      <div *ngIf="restauranteForm.get('telefono')?.errors?.['malsonante']" class="error">
        El teléfono contiene palabras no permitidas.
      </div>
    </div>

    <!-- Email -->
    <div class="form-group">
      <label>Email*</label>
      <input type="email" formControlName="email" placeholder="tucorreo@ejemplo.com" />
      <div *ngIf="restauranteForm.get('email')?.touched && restauranteForm.get('email')?.invalid" class="error">
        Introduce un email válido.
      </div>
    </div>

    <!-- Descripción -->
    <div class="form-group">
      <label>Descripción*</label>
      <textarea formControlName="descripcion" placeholder="Descripción del restaurante, menú o detalles adicionales"></textarea>
      <div *ngIf="restauranteForm.get('descripcion')?.touched && restauranteForm.get('descripcion')?.invalid" class="error">
        La descripción es obligatoria.
      </div>
      <div *ngIf="restauranteForm.get('descripcion')?.errors?.['malsonante']" class="error">
        La descripción contiene palabras no permitidas.
      </div>
    </div>

    <!-- Tipo de Cocina -->
    <div class="form-group">
      <label>Tipo de Cocina*</label>
      <select formControlName="tipoCocina">
        <option value="">Seleccionar</option>
        <option *ngFor="let tipo of tiposCocina" [value]="tipo">{{ tipo }}</option>
      </select>
      <div *ngIf="restauranteForm.get('tipoCocina')?.touched && restauranteForm.get('tipoCocina')?.invalid" class="error">
        Selecciona un tipo de cocina.
      </div>
    </div>

    <!-- Tipo Personalizado -->
    <div class="form-group" *ngIf="restauranteForm.get('tipoCocina')?.value === 'OTRO'">
      <label>Tipo Personalizado*</label>
      <input type="text" formControlName="tipoCocinaPersonalizado" placeholder="Especifica el tipo personalizado" />
      <div *ngIf="restauranteForm.get('tipoCocinaPersonalizado')?.touched && restauranteForm.get('tipoCocinaPersonalizado')?.invalid" class="error">
        Especifica el tipo personalizado (mínimo 2 caracteres).
      </div>
      <div *ngIf="restauranteForm.get('tipoCocinaPersonalizado')?.errors?.['malsonante']" class="error">
        El tipo personalizado contiene palabras no permitidas.
      </div>
    </div>

    <!-- Barrio -->
    <div class="form-group">
      <label>Barrio*</label>
      <select formControlName="barrio">
        <option value="">Seleccionar</option>
        <option *ngFor="let b of barrios" [value]="b">{{ b }}</option>
      </select>
      <div *ngIf="restauranteForm.get('barrio')?.touched && restauranteForm.get('barrio')?.invalid" class="error">
        Selecciona un barrio.
      </div>
    </div>

    <!-- Rango de Precio -->
    <div class="form-group">
      <label>Rango de Precio*</label>
      <select formControlName="rangoPrecio">
        <option value="">Seleccionar</option>
        <option *ngFor="let r of rangosPrecio" [value]="r">{{ r | formatearRangoPrecio}}</option>
      </select>
      <div *ngIf="restauranteForm.get('rangoPrecio')?.touched && restauranteForm.get('rangoPrecio')?.invalid" class="error">
        Selecciona un rango de precio.
      </div>
    </div>

    <!-- Restricciones -->
    <div class="form-group">
      <label>Restricciones Dietéticas</label>
      <select formControlName="restricciones" multiple>
        <option *ngFor="let r of restricciones" [value]="r">{{ r | formatearRestriccion}}</option>
      </select>
    </div>

    <!-- Botón -->
    <button type="submit" [disabled]="restauranteForm.invalid">Crear Restaurante</button>
  </form>
</div>
