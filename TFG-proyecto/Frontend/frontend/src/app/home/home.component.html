<!-- üéØ BANNER ORIGINAL -->
<section class="banner">
  <h1>Encuentra tu pr√≥ximo favorito üçΩÔ∏è</h1>

  <div class="search-bar">
    <input
      type="text"
      placeholder="Buscar por nombre..."
      [(ngModel)]="searchQuery"
    />
    <button (click)="buscar()">Buscar</button>
  </div>

  <!-- üîΩ NUEVA BARRA DE FILTROS -->
  <div class="filtros-bar">
    <!-- üîÅ Tipo de cocina -->
    <select [(ngModel)]="filtros.tipoCocina" (change)="buscar()">
      <option value="">Tipo de cocina</option>
      <option *ngFor="let t of tiposCocina" [value]="t">{{ t }}</option>
    </select>

    <!-- üîÅ Barrio -->
    <select [(ngModel)]="filtros.barrio" (change)="buscar()">
      <option value="">Barrio</option>
      <option *ngFor="let b of barrios" [value]="b">{{ b }}</option>
    </select>

    <!-- üîÅ Rango de precio -->
    <select [(ngModel)]="filtros.rangoPrecio" (change)="buscar()">
      <option value="">Rango de precio</option>
      <option *ngFor="let r of rangosPrecio" [value]="r">{{ r }}</option>
    </select>

    <!-- üîΩ Dropdown de restricciones diet√©ticas -->
    <div class="dropdown-wrapper">
      <button class="dropdown-toggle" (click)="toggleRestricciones()">
        Restricciones Diet√©ticas
        <span [class.open]="restriccionesAbierto">‚ñº</span>
      </button>

      <div class="dropdown-panel" *ngIf="restriccionesAbierto">
        <div class="dropdown-checkbox" *ngFor="let restriccion of restricciones">
          <label>
            <input
              type="checkbox"
              [value]="restriccion"
              [checked]="filtros.restricciones.includes(restriccion)"
              (change)="onCheckboxChange($event)"
            />
            {{ restriccion }}
          </label>
        </div>
      </div>
    </div>

    <!-- ‚ùå Bot√≥n eliminado porque ya todo es autom√°tico -->
    <!-- <button class="btn-filtrar" (click)="buscar()">Aplicar filtros</button> -->
  </div>
</section>

<!-- üéØ Restaurantes destacados si no hay b√∫squeda -->
<div *ngIf="!busquedaRealizada" class="resultados-container">
  <h2>Destacados de la semana</h2>

  <div *ngFor="let destacado of destacados" class="restaurante-card">
    <h3>{{ destacado.nombre }}</h3>
    <p>{{ destacado.descripcion }}</p>
  </div>
</div>

<!-- üßæ Resultados -->
<div *ngIf="restaurantes.length > 0" class="resultados-container">
  <h2>Restaurantes encontrados</h2>

  <div
    *ngFor="let restaurante of restaurantes"
    class="restaurante-card clickable"
    (click)="verPerfil(restaurante.id!)"
  >
    <h3>{{ restaurante.nombre }}</h3>
    <p>{{ restaurante.descripcion || 'Sin descripci√≥n disponible' }}</p>
    <p><strong>Direcci√≥n:</strong> {{ restaurante.direccion }}</p>
    <p><strong>Tel√©fono:</strong> {{ restaurante.telefono }}</p>

    <div class="etiquetas">
      <span class="etiqueta">{{ restaurante.tipoCocina }}</span>
      <span class="etiqueta">{{ restaurante.barrio }}</span>
      <span class="etiqueta">{{ restaurante.rangoPrecio }}</span>
      <span
        *ngFor="let restriccion of restaurante.restriccionesDieteticas"
        class="etiqueta"
      >
        {{ restriccion }}
      </span>
    </div>
  </div>
</div>
